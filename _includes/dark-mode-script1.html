<script>
  const theme = localStorage.getItem("theme");
  if (theme === "dark") {
    document.documentElement.setAttribute("data-theme", "dark");
  }

  const userPrefers = getComputedStyle(document.documentElement).getPropertyValue("content");

  let themeToggleElement = document.getElementById("theme-toggle");
  if (! themeToggleElement)   console.log("NOT FOUND themeToggleElement");

  if (theme === "dark") {
    document.getElementById("theme-toggle").innerHTML = "Light Mode";
  } else if (theme === "light") {
    document.getElementById("theme-toggle").innerHTML = "Dark Mode";
  } else if (userPrefers === "dark") {
    document.documentElement.setAttribute("data-theme", "dark");
    window.localStorage.setItem("theme", "dark");
    document.getElementById("theme-toggle").innerHTML = "Light Mode";
  } else {
    document.documentElement.setAttribute("data-theme", "light");
    window.localStorage.setItem("theme", "light");
    document.getElementById("theme-toggle").innerHTML = "Dark Mode";
  }

  function modeSwitcher() {
    let currentMode = document.documentElement.getAttribute("data-theme");
    console.log("setTheme = " + currentMode);
    if (currentMode === "dark") {
      jtd.setTheme('dark');

      document.documentElement.setAttribute("data-theme", "light");
      window.localStorage.setItem("theme", "light");
      document.getElementById("theme-toggle").innerHTML = "Dark Mode";
    } else {
      jtd.setTheme('light');

      document.documentElement.setAttribute("data-theme", "dark");
      window.localStorage.setItem("theme", "dark");
      document.getElementById("theme-toggle").innerHTML = "Light Mode";
    }
  }
</script>
